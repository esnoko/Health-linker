"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8894],{8894:(b,g,i)=>{i.r(g),i.d(g,{ConsultationsPageModule:()=>D});var u=i(177),l=i(4341),s=i(1075),h=i(9591),t=i(4438),p=i(6996),_=i(9579),a=i(2406),d=i(4163),m=i(3235),f=i(7959);const F=o=>["/my-file",o],C=()=>[0,1];function y(o,r){if(1&o){const n=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"th")(6,"ion-button",25),t.bIt("click",function(){const c=t.eBV(n).index,v=t.XpG(2);return t.Njj(v.remove(c))}),t.nrm(7,"ion-icon",26),t.k0s()()()}if(2&o){const n=r.$implicit;t.R7$(2),t.JRh(n.value.Medication),t.R7$(2),t.JRh(n.value.Instruction)}}function P(o,r){if(1&o&&(t.j41(0,"ion-select-option"),t.EFF(1),t.k0s()),2&o){const n=r.$implicit;t.R7$(),t.JRh(n.name)}}function j(o,r){if(1&o&&(t.j41(0,"ion-select-option"),t.EFF(1),t.k0s()),2&o){const n=r.$implicit;t.R7$(),t.JRh(n)}}function k(o,r){if(1&o){const n=t.RV6();t.j41(0,"div",27)(1,"form",28)(2,"div",29)(3,"p",30),t.EFF(4,"Add Medications"),t.k0s(),t.j41(5,"div",31)(6,"ion-select",32),t.DNE(7,P,2,1,"ion-select-option",21),t.k0s()(),t.j41(8,"div",31)(9,"ion-select",33),t.DNE(10,j,2,1,"ion-select-option",21),t.k0s()(),t.j41(11,"ion-button",34),t.bIt("click",function(){t.eBV(n);const c=t.XpG(2);return t.Njj(c.Add())}),t.EFF(12," Add "),t.k0s()()()()}if(2&o){const n=t.XpG(2);t.R7$(),t.Y8G("formGroup",n.medForm),t.R7$(6),t.Y8G("ngForOf",n.medicine),t.R7$(3),t.Y8G("ngForOf",n.instructions)}}function x(o,r){if(1&o){const n=t.RV6();t.j41(0,"ion-content",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"p"),t.EFF(6),t.k0s(),t.j41(7,"p"),t.EFF(8),t.k0s()(),t.j41(9,"div"),t.nrm(10,"ion-img",8),t.j41(11,"p",9),t.EFF(12,"Client"),t.k0s()()(),t.j41(13,"div",10)(14,"ion-button",11),t.nrm(15,"ion-icon",12),t.EFF(16," Medical History "),t.k0s()()(),t.nrm(17,"br"),t.j41(18,"div",13)(19,"form",14)(20,"p",15),t.EFF(21,"Diagnosis"),t.k0s(),t.nrm(22,"textarea",16),t.k0s(),t.j41(23,"div",17)(24,"p",15),t.EFF(25,"Prescription"),t.k0s(),t.j41(26,"ion-button",18),t.nrm(27,"ion-icon",19),t.k0s()(),t.j41(28,"table",20)(29,"thead")(30,"tr")(31,"th"),t.EFF(32," Medicine "),t.k0s(),t.j41(33,"th"),t.EFF(34," Instructions "),t.k0s(),t.nrm(35,"th"),t.k0s()(),t.j41(36,"tbody"),t.DNE(37,y,8,2,"tr",21),t.k0s()()(),t.j41(38,"div",22)(39,"app-button",23),t.bIt("click",function(){t.eBV(n);const c=t.XpG();return t.Njj(c.AddMedicalFiles())}),t.k0s()()(),t.j41(40,"ion-modal",24),t.DNE(41,k,13,3,"ng-template"),t.k0s()()}if(2&o){const n=t.XpG();t.R7$(6),t.SpI("Names: ",n.client.clientNames,""),t.R7$(2),t.SpI("Consultation: ",n.client.Type,""),t.R7$(2),t.Y8G("src","/assets/img/HLogo.png"),t.R7$(4),t.Y8G("routerLink",t.eq3(8,F,n.client.clientId)),t.R7$(5),t.Y8G("formGroup",n.consultForm),t.R7$(18),t.Y8G("ngForOf",n.Prescription.controls),t.R7$(3),t.Y8G("initialBreakpoint",1)("breakpoints",t.lJ4(10,C))}}const E=[{path:"",component:(()=>{var o;class r{onInStructionSelected(e){throw new Error("Method not implemented.")}constructor(e,c,v,I,U,G,S,T,N){this.USER=e,this.utils=c,this.Local=v,this.fb=I,this.firestore=U,this.route=G,this.User=S,this.dataBase=T,this.router=N,this.medicine=[],this.selectedMedicine=[],this.instructions=["1x per/day","2x per/day","3x per/day"],this.USER_ID=this.USER.getUserID(),console.log(this.USER_ID),this.consultForm=this.fb.group({Doctor:[],Hospital:[],PatientNames:[],PatientsNo:[],Date:[new Date],Status:["Collection"],Prescription:this.fb.array([]),Diagnosis:[]}),this.medForm=this.fb.group({Medication:[""],Instruction:[""]})}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),console.log("ID",this.id),this.Local.getHospitals().subscribe({next:e=>{e&&e.meds?this.medicine=e.meds:console.error("Data structure is incorrect:",e)},error:e=>{console.error("Error occurred:",e)}}),this.getData()}get Prescription(){return this.consultForm.get("Prescription")}Add(){const e=this.fb.group({Medication:[this.medForm.value.Medication],Instruction:[this.medForm.value.Instruction]});this.Prescription.push(e),this.utils.showToast("Added!"),this.medForm.reset()}remove(e){this.Prescription.removeAt(e),this.utils.showToast("Removed")}AddMedicalFiles(){this.utils.showSpinner(),console.log("Console: ",this.consultForm.value),this.firestore.setData("MedicalFiles",this.consultForm.value).then(e=>{this.utils.showToast("Saved"),this.dataBase.collection("Appointments").doc(this.id).update({Status:"closed"}).then(c=>{this.utils.hideSpinner(),this.router.navigateByUrl("/personell/dashboard"),this.firestore.nitifications(this.client.BookedBy,{title:"Prescription ready For collections",msg:"Go to pharmacy to collect Medications"})})})}getData(){this.firestore.readById("Appointments",this.id).subscribe(e=>{this.client=e,this.consultForm.patchValue({Doctor:this.User.getUser().FullNames,Hospital:e.hospital,PatientNames:e.clientNames,PatientsNo:e.clientId})})}}return(o=r).\u0275fac=function(e){return new(e||o)(t.rXU(p.J),t.rXU(_.T),t.rXU(a.l),t.rXU(l.ok),t.rXU(d.B),t.rXU(h.nX),t.rXU(p.J),t.rXU(m.Qe),t.rXU(h.Ix))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-consultations"]],decls:7,vars:1,consts:[["color","primary"],["slot","start"],["color","light",4,"ngIf"],["color","light"],[1,"p-1"],[1,"p-2","rounded","shadow-md","bg-white"],[1,"flex","items-center","justify-between","space-x-1"],[1,"text-gray-400","text-lg","font-semibold"],[1,"h-20","mr-3",3,"src"],[1,"font-bold","text-health_blue-1","text-2xl"],[1,"flex","space-x-2","justify-between"],[1,"py-2","font-semibold",3,"routerLink"],["slot","start","name","folder-outline"],[1,"p-2"],[3,"formGroup"],[1,"font-bold","text-2xl","text-gray-500"],["formControlName","Diagnosis","placeholder","Diagnosis","name","","id","",1,"w-full","border-2","border-health_blue-1","rounded-md","p-2","h-32","text-gray-600","bg-health_blue-2","bg-opacity-35"],[1,"flex","justify-between","items-center"],["shape","round","id","open-modal"],["slot","icon-only","name","add"],[1,"rounded","border","w-full"],[4,"ngFor","ngForOf"],[1,"w-[95%]","m-auto"],["btnText","Save",3,"click"],["trigger","open-modal",3,"initialBreakpoint","breakpoints"],["color","danger","shape","round","fill","clear",3,"click"],["slot","icon-only","name","trash-outline"],[1,"block"],[1,"w-full",3,"formGroup"],[1,"w-full","p-4"],[1,"text-red-300","font-semibold","text-center","text-2xl"],[1,"w-full","flex","flex-col","p-2"],["formControlName","Medication","mode","ios","placeholder","select Medicine",1,"px-2","border-health_green","border","rounded-lg","w-full"],["formControlName","Instruction","mode","ios","placeholder","select Instruction",1,"px-2","border-health_green","border","rounded-lg","w-full"],[3,"click"]],template:function(e,c){1&e&&(t.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t.nrm(3,"ion-back-button"),t.k0s(),t.j41(4,"ion-title"),t.EFF(5,"Consultations"),t.k0s()()(),t.DNE(6,x,42,11,"ion-content",2)),2&e&&(t.R7$(6),t.Y8G("ngIf",c.client))},dependencies:[u.Sq,u.bT,l.qT,l.me,l.BC,l.cb,s.Jm,s.QW,s.W9,s.eU,s.iq,s.KW,s.Nm,s.Ip,s.BC,s.ai,s.Sb,s.Je,s.el,s.N7,h.Wk,f.Q,l.j4,l.JD],styles:[".block[_ngcontent-%COMP%]{width:100%;height:300px;display:flex;justify-content:center}ion-modal[_ngcontent-%COMP%]{--height: auto}"]}),r})()}];let M=(()=>{var o;class r{}return(o=r).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[h.iI.forChild(E),h.iI]}),r})();var R=i(5553);let D=(()=>{var o;class r{}return(o=r).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[u.MD,l.YN,s.bv,M,R.h,l.X1]}),r})()},9579:(b,g,i)=>{i.d(g,{T:()=>h});var u=i(467),l=i(4438),s=i(1075);let h=(()=>{var t;class p{constructor(a,d,m){this.loadingController=a,this.toastController=d,this.alertController=m}showSpinner(a="Loading...."){var d=this;return(0,u.A)(function*(){yield(yield d.loadingController.create({message:a,mode:"ios",spinner:"circular",backdropDismiss:!1,cssClass:"custom-class",duration:0})).present()})()}hideSpinner(){var a=this;return(0,u.A)(function*(){yield a.loadingController.dismiss()})()}showToast(a,d=2e3){var m=this;return(0,u.A)(function*(){yield(yield m.toastController.create({message:a,duration:d,position:"bottom"})).present()})()}showAlert(a,d,m="OK"){var f=this;return(0,u.A)(function*(){yield(yield f.alertController.create({header:a,mode:"ios",message:d,buttons:[m]})).present()})()}}return(t=p).\u0275fac=function(a){return new(a||t)(l.KVO(s.Xi),l.KVO(s.K_),l.KVO(s.hG))},t.\u0275prov=l.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),p})()}}]);